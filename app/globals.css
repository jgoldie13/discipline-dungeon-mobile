@import "tailwindcss";

:root {
  color-scheme: dark;

  /* Discipline Dungeon - High Fantasy Stone + Parchment */
  --dd-bg: 9 10 12; /* near-black stone */
  --dd-surface: 20 18 16; /* deep stone */
  --dd-surface-2: 30 26 22; /* lifted stone */
  --dd-surface-3: 38 32 26; /* aged parchment tint */
  --dd-border: 98 76 46 / 0.55; /* muted brass */
  --dd-border-gold: 206 160 86; /* ornate gold */

  --dd-text: 232 236 242; /* off-white */
  --dd-muted: 188 195 208; /* readable muted */

  --dd-glow-blue: 56 189 248; /* mana glow */
  --dd-glow-red: 248 113 113; /* blood glow */

  /* Semantic Background & Surface Colors */
  --bg: var(--dd-bg);
  --surface-1: var(--dd-surface);
  --surface-2: var(--dd-surface-2);
  --border: var(--dd-border);

  /* Semantic Text Colors */
  --text: var(--dd-text);
  --muted: var(--dd-muted);

  /* Semantic State Colors */
  --positive: 34 197 94; /* green-500 - earned success, completed, payout */
  --warning: 251 191 36; /* amber-500 - at-risk, threshold warning */
  --negative: 239 68 68; /* red-500 - violation, penalty, destructive */

  /* Focus State */
  --focus: var(--dd-glow-blue);

  /* Legacy Support (maintain compatibility) */
  --background: #090a0c;
  --foreground: #e8ecf2;
}

@theme inline {
  /* Map semantic tokens to Tailwind */
  --color-bg: rgb(var(--bg));
  --color-surface-1: rgb(var(--surface-1));
  --color-surface-2: rgb(var(--surface-2));
  --color-border: rgb(var(--border));

  --color-dd-bg: rgb(var(--dd-bg));
  --color-dd-surface: rgb(var(--dd-surface));
  --color-dd-surface-2: rgb(var(--dd-surface-2));
  --color-dd-surface-3: rgb(var(--dd-surface-3));
  --color-dd-border: rgb(var(--dd-border));
  --color-dd-border-gold: rgb(var(--dd-border-gold));
  --color-dd-text: rgb(var(--dd-text));
  --color-dd-muted: rgb(var(--dd-muted));
  --color-dd-glow-blue: rgb(var(--dd-glow-blue));
  --color-dd-glow-red: rgb(var(--dd-glow-red));

  --color-text: rgb(var(--text));
  --color-muted: rgb(var(--muted));

  --color-positive: rgb(var(--positive));
  --color-warning: rgb(var(--warning));
  --color-negative: rgb(var(--negative));

  --color-focus: rgb(var(--focus));

  /* Legacy */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-inter);
  --font-serif: var(--font-cinzel);
  --font-mono: ui-monospace, SFMono-Regular, Menlo, monospace;

  /* PixelLab Radii - Large rounded corners */
  --radius-sm: 0.5rem;   /* 8px - small elements */
  --radius-md: 0.75rem;  /* 12px - cards, buttons */
  --radius-lg: 1rem;     /* 16px - larger cards */
  --radius-xl: 1.5rem;   /* 24px - prominent surfaces */
  --radius-2xl: 2rem;    /* 32px - hero elements */
  --radius-full: 9999px; /* pill shape */
}

body {
  background-color: #020617;
  color: rgb(var(--dd-text));
  font-family: var(--font-sans), ui-sans-serif, system-ui, sans-serif;
  font-variant-numeric: tabular-nums;
  position: relative;
  isolation: isolate;
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='0.35'/%3E%3C/svg%3E");
  opacity: 0.06;
  mix-blend-mode: soft-light;
  z-index: 0;
}

body::after {
  content: '';
  position: fixed;
  inset: -20%;
  pointer-events: none;
  background: radial-gradient(circle at 50% 20%, transparent 0%, rgba(0, 0, 0, 0.6) 70%);
  opacity: 0.6;
  z-index: 0;
}

body > * {
  position: relative;
  z-index: 1;
}

@layer utilities {
  .fantasy-frame {
    border: 1px solid rgb(var(--dd-border-gold) / 0.5);
    box-shadow: 0 18px 40px -18px rgba(0, 0, 0, 0.7),
      inset 0 1px 0 rgba(255, 255, 255, 0.08),
      inset 0 -1px 0 rgba(0, 0, 0, 0.7);
  }

  .glass-panel {
    @apply backdrop-blur-xl bg-slate-900/70 border border-white/10 shadow-2xl shadow-[0_0_15px_rgba(34,211,238,0.1)];
    position: relative;
    overflow: hidden;
  }

  .scroll-card {
    @apply rounded-sm bg-[#d9c9a6] bg-[linear-gradient(160deg,rgba(255,255,255,0.08),rgba(0,0,0,0.05))] border border-black/10 text-slate-900 shadow-lg shadow-black/40 transition-transform hover:-translate-y-1 hover:shadow-xl motion-reduce:transform-none motion-reduce:transition-none;
    position: relative;
    overflow: hidden;
  }

  .scroll-card .text-dd-text {
    @apply text-slate-900;
  }

  .scroll-card .text-dd-muted,
  .scroll-card .text-dd-muted\/80 {
    @apply text-slate-700;
  }

  @media (display-mode: standalone), (display-mode: fullscreen) {
    .pwa-nav-show {
      display: block !important;
    }

    .pwa-nav-padding {
      padding-bottom: 5rem;
    }
  }

  .sigil-ring {
    position: relative;
    display: grid;
    place-items: center;
    border-radius: 999px;
    border: 1px solid rgb(var(--dd-border-gold) / 0.45);
    background: radial-gradient(circle at 50% 45%, rgba(255, 255, 255, 0.08), transparent 60%);
    box-shadow: 0 0 22px rgba(56, 189, 248, 0.12),
      inset 0 0 14px rgba(0, 0, 0, 0.6);
  }

  .sigil-ring::before {
    content: '';
    position: absolute;
    inset: 10%;
    border-radius: 999px;
    border: 1px solid rgb(var(--dd-border-gold) / 0.35);
    box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.6);
  }

  .sigil-ring::after {
    content: '';
    position: absolute;
    inset: 6%;
    border-radius: 999px;
    background: repeating-conic-gradient(
      from 0deg,
      rgba(206, 160, 86, 0.35) 0deg 8deg,
      transparent 8deg 18deg
    );
    mask: radial-gradient(circle at center, transparent 58%, black 60%);
    opacity: 0.4;
    pointer-events: none;
  }

  .glow-blue {
    filter: drop-shadow(0 0 10px rgba(56, 189, 248, 0.35))
      drop-shadow(0 0 22px rgba(56, 189, 248, 0.25));
  }

  .glow-red {
    filter: drop-shadow(0 0 10px rgba(248, 113, 113, 0.35))
      drop-shadow(0 0 22px rgba(248, 113, 113, 0.25));
  }

  .dd-input {
    @apply w-full rounded-[--radius-lg] border border-dd-border/70 bg-dd-surface/70 text-dd-text placeholder:text-dd-muted/80;
    @apply focus:outline-none focus:ring-2 focus:ring-dd-glow-blue/30 focus:border-dd-border-gold/70;
  }

  .scroll-card .dd-input {
    @apply border-slate-400/70 bg-[#d6c6a1] text-slate-900 placeholder:text-slate-600;
    @apply focus:ring-cyan-500/30 focus:border-slate-500/70;
  }

  .critical-damage {
    @apply fixed inset-0 pointer-events-none z-50 bg-[radial-gradient(circle_at_center,transparent_0%,rgba(244,63,94,0.3)_100%)];
  }
}
