@import "tailwindcss";

:root {
  color-scheme: dark;

  /* Discipline Dungeon - High Fantasy Stone + Parchment */
  --dd-bg: 9 10 12; /* near-black stone */
  --dd-surface: 20 18 16; /* deep stone */
  --dd-surface-2: 30 26 22; /* lifted stone */
  --dd-surface-3: 38 32 26; /* aged parchment tint */
  --dd-border: 98 76 46 / 0.55; /* muted brass */
  --dd-border-gold: 206 160 86; /* ornate gold */

  --dd-text: 232 236 242; /* off-white */
  --dd-muted: 170 176 190; /* readable muted */

  --dd-glow-blue: 56 189 248; /* mana glow */
  --dd-glow-red: 248 113 113; /* blood glow */

  /* Semantic Background & Surface Colors */
  --bg: var(--dd-bg);
  --surface-1: var(--dd-surface);
  --surface-2: var(--dd-surface-2);
  --border: var(--dd-border);

  /* Semantic Text Colors */
  --text: var(--dd-text);
  --muted: var(--dd-muted);

  /* Semantic State Colors */
  --positive: 34 197 94; /* green-500 - earned success, completed, payout */
  --warning: 251 191 36; /* amber-500 - at-risk, threshold warning */
  --negative: 239 68 68; /* red-500 - violation, penalty, destructive */

  /* Focus State */
  --focus: var(--dd-glow-blue);

  /* Legacy Support (maintain compatibility) */
  --background: #090a0c;
  --foreground: #e8ecf2;
}

@theme inline {
  /* Map semantic tokens to Tailwind */
  --color-bg: rgb(var(--bg));
  --color-surface-1: rgb(var(--surface-1));
  --color-surface-2: rgb(var(--surface-2));
  --color-border: rgb(var(--border));

  --color-dd-bg: rgb(var(--dd-bg));
  --color-dd-surface: rgb(var(--dd-surface));
  --color-dd-surface-2: rgb(var(--dd-surface-2));
  --color-dd-surface-3: rgb(var(--dd-surface-3));
  --color-dd-border: rgb(var(--dd-border));
  --color-dd-border-gold: rgb(var(--dd-border-gold));
  --color-dd-text: rgb(var(--dd-text));
  --color-dd-muted: rgb(var(--dd-muted));
  --color-dd-glow-blue: rgb(var(--dd-glow-blue));
  --color-dd-glow-red: rgb(var(--dd-glow-red));

  --color-text: rgb(var(--text));
  --color-muted: rgb(var(--muted));

  --color-positive: rgb(var(--positive));
  --color-warning: rgb(var(--warning));
  --color-negative: rgb(var(--negative));

  --color-focus: rgb(var(--focus));

  /* Legacy */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-inter);
  --font-serif: var(--font-cinzel);
  --font-mono: ui-monospace, SFMono-Regular, Menlo, monospace;

  /* PixelLab Radii - Large rounded corners */
  --radius-sm: 0.5rem;   /* 8px - small elements */
  --radius-md: 0.75rem;  /* 12px - cards, buttons */
  --radius-lg: 1rem;     /* 16px - larger cards */
  --radius-xl: 1.5rem;   /* 24px - prominent surfaces */
  --radius-2xl: 2rem;    /* 32px - hero elements */
  --radius-full: 9999px; /* pill shape */
}

body {
  background-color: rgb(var(--dd-bg));
  background-image: radial-gradient(
      1200px 800px at 10% -10%,
      rgba(71, 85, 105, 0.35),
      transparent 60%
    ),
    radial-gradient(
      900px 700px at 110% 10%,
      rgba(14, 116, 144, 0.22),
      transparent 65%
    ),
    radial-gradient(
      800px 600px at 50% 120%,
      rgba(120, 53, 15, 0.18),
      transparent 70%
    ),
    linear-gradient(180deg, rgba(7, 8, 11, 0.96), rgba(4, 5, 7, 0.98));
  color: rgb(var(--dd-text));
  font-family: var(--font-sans), ui-sans-serif, system-ui, sans-serif;
  font-variant-numeric: tabular-nums;
  position: relative;
  isolation: isolate;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='0.35'/%3E%3C/svg%3E");
  opacity: 0.06;
  mix-blend-mode: soft-light;
  z-index: 0;
}

body::after {
  content: '';
  position: fixed;
  inset: -20%;
  pointer-events: none;
  background: radial-gradient(circle at 50% 20%, transparent 0%, rgba(0, 0, 0, 0.6) 70%);
  opacity: 0.6;
  z-index: 0;
}

body > * {
  position: relative;
  z-index: 1;
}

@layer utilities {
  .fantasy-frame {
    border: 1px solid rgb(var(--dd-border-gold) / 0.5);
    box-shadow: 0 18px 40px -18px rgba(0, 0, 0, 0.7),
      inset 0 1px 0 rgba(255, 255, 255, 0.08),
      inset 0 -1px 0 rgba(0, 0, 0, 0.7);
  }

  .glass-panel {
    @apply backdrop-blur-xl text-dd-text;
    position: relative;
    overflow: hidden;
    border: 1px solid rgb(var(--dd-border-gold) / 0.5);
    background-image: linear-gradient(
        180deg,
        rgba(30, 26, 22, 0.92),
        rgba(16, 14, 12, 0.96)
      ),
      radial-gradient(
        120% 140% at 0% 0%,
        rgba(56, 189, 248, 0.08),
        transparent 60%
      ),
      radial-gradient(1px 1px at 20% 25%, rgba(255, 255, 255, 0.08), transparent 60%),
      radial-gradient(1px 1px at 60% 35%, rgba(255, 255, 255, 0.06), transparent 60%),
      radial-gradient(1px 1px at 80% 70%, rgba(255, 255, 255, 0.05), transparent 60%);
    box-shadow: 0 18px 40px -18px rgba(0, 0, 0, 0.7),
      inset 0 1px 0 rgba(255, 255, 255, 0.08),
      inset 0 -1px 0 rgba(0, 0, 0, 0.7),
      0 24px 60px -30px rgba(0, 0, 0, 0.8),
      inset 0 0 30px rgba(0, 0, 0, 0.45);
  }

  .scroll-card {
    @apply text-dd-text;
    position: relative;
    overflow: hidden;
    border: 1px solid rgb(var(--dd-border-gold) / 0.5);
    background-image: linear-gradient(
        155deg,
        rgba(42, 35, 28, 0.95),
        rgba(28, 24, 20, 0.98)
      ),
      radial-gradient(
        120% 120% at 100% 0%,
        rgba(206, 160, 86, 0.08),
        transparent 60%
      ),
      radial-gradient(48px 70px at 0% 50%, rgba(206, 160, 86, 0.12), transparent 70%),
      radial-gradient(48px 70px at 100% 50%, rgba(206, 160, 86, 0.12), transparent 70%),
      radial-gradient(1px 1px at 18% 22%, rgba(255, 255, 255, 0.12), transparent 60%),
      radial-gradient(1px 1px at 45% 40%, rgba(255, 255, 255, 0.09), transparent 60%),
      radial-gradient(1px 1px at 72% 62%, rgba(255, 255, 255, 0.08), transparent 60%);
    box-shadow: 0 18px 40px -18px rgba(0, 0, 0, 0.7),
      inset 0 1px 0 rgba(255, 255, 255, 0.08),
      inset 0 -1px 0 rgba(0, 0, 0, 0.7),
      0 22px 50px -28px rgba(0, 0, 0, 0.75),
      inset 0 0 22px rgba(0, 0, 0, 0.35);
  }

  .glass-panel::before,
  .scroll-card::before {
    content: '';
    position: absolute;
    inset: 6px;
    border: 1px solid rgb(var(--dd-border-gold) / 0.2);
    border-radius: inherit;
    box-shadow: inset 0 0 18px rgba(0, 0, 0, 0.55);
    pointer-events: none;
  }

  .glass-panel::after {
    content: '';
    position: absolute;
    inset: 10px;
    border-radius: inherit;
    background:
      linear-gradient(135deg, rgba(206, 160, 86, 0.35) 0 2px, transparent 2px) top left,
      linear-gradient(225deg, rgba(206, 160, 86, 0.35) 0 2px, transparent 2px) top right,
      linear-gradient(45deg, rgba(206, 160, 86, 0.35) 0 2px, transparent 2px) bottom left,
      linear-gradient(315deg, rgba(206, 160, 86, 0.35) 0 2px, transparent 2px) bottom right;
    background-size: 22px 22px;
    background-repeat: no-repeat;
    opacity: 0.6;
    pointer-events: none;
  }

  .scroll-card::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(
        120% 120% at 50% 10%,
        rgba(255, 255, 255, 0.08),
        transparent 60%
      ),
      radial-gradient(
        120% 120% at 50% 90%,
        rgba(14, 116, 144, 0.08),
        transparent 65%
      );
    mix-blend-mode: screen;
    opacity: 0.22;
    pointer-events: none;
  }

  .sigil-ring {
    position: relative;
    display: grid;
    place-items: center;
    border-radius: 999px;
    border: 1px solid rgb(var(--dd-border-gold) / 0.45);
    background: radial-gradient(circle at 50% 45%, rgba(255, 255, 255, 0.08), transparent 60%);
    box-shadow: 0 0 22px rgba(56, 189, 248, 0.12),
      inset 0 0 14px rgba(0, 0, 0, 0.6);
  }

  .sigil-ring::before {
    content: '';
    position: absolute;
    inset: 10%;
    border-radius: 999px;
    border: 1px solid rgb(var(--dd-border-gold) / 0.35);
    box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.6);
  }

  .sigil-ring::after {
    content: '';
    position: absolute;
    inset: 6%;
    border-radius: 999px;
    background: repeating-conic-gradient(
      from 0deg,
      rgba(206, 160, 86, 0.35) 0deg 8deg,
      transparent 8deg 18deg
    );
    mask: radial-gradient(circle at center, transparent 58%, black 60%);
    opacity: 0.4;
    pointer-events: none;
  }

  .glow-blue {
    filter: drop-shadow(0 0 10px rgba(56, 189, 248, 0.35))
      drop-shadow(0 0 22px rgba(56, 189, 248, 0.25));
  }

  .glow-red {
    filter: drop-shadow(0 0 10px rgba(248, 113, 113, 0.35))
      drop-shadow(0 0 22px rgba(248, 113, 113, 0.25));
  }

  .dd-input {
    @apply w-full rounded-[--radius-lg] border border-dd-border/70 bg-dd-surface/70 text-dd-text placeholder:text-dd-muted/70;
    @apply focus:outline-none focus:ring-2 focus:ring-dd-glow-blue/30 focus:border-dd-border-gold/70;
  }

  .critical-damage {
    @apply fixed inset-0 pointer-events-none z-50;
    background: radial-gradient(
      circle at center,
      transparent 0%,
      rgba(244, 63, 94, 0.3) 100%
    );
  }
}
